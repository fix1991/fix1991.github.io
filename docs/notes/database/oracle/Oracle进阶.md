---
title: Oracle进阶
createTime: 2024/11/24 15:56:14
permalink: /notes/database/fxwd3dqr/
---
## 增删改查

### 批量插入

`INSERT ALL`

```sql
INSERT ALL
INTO T_EMPLOYEE (ID, NAME, BIRTHDAY, GENDER, SALARY, DEPARTMENT_ID) VALUES (9999, '员工9999', TO_DATE('2020-05-23', 'YYYY-MM-DD'), 'M', 15000.0, 1) 
INTO T_EMPLOYEE (ID, NAME, BIRTHDAY, GENDER, SALARY, DEPARTMENT_ID) VALUES (10000, '员工10000', TO_DATE('2020-05-23', 'YYYY-MM-DD'), 'M', 15000.0, 1)
SELECT * FROM DUAL;
```

`MERGE INTO`

`ON`条件子句必须加括号

```sql
MERGE INTO T_EMPLOYEE T1
USING (SELECT 1 ID, '员工11' NAME, TO_DATE('2024-03-23', 'YYYY-MM-DD') BIRTHDAY, 'F' GENDER, 25000.0 SALARY, 2 DEPARTMENT_ID FROM DUAL
      UNION ALL
			SELECT 2 ID, '员工22' NAME, TO_DATE('2024-03-23', 'YYYY-MM-DD') BIRTHDAY, 'F' GENDER, 25000.0 SALARY, 2 DEPARTMENT_ID FROM DUAL) T2
ON (T1.ID = T2.ID)
WHEN MATCHED THEN
  UPDATE SET T1.NAME = T2.NAME, T1.BIRTHDAY = T2.BIRTHDAY, T1.GENDER = T2.GENDER, T1.SALARY = T2.SALARY, T1.DEPARTMENT_ID = T2.DEPARTMENT_ID
WHEN NOT MATCHED THEN
  INSERT (T1.NAME, T1.BIRTHDAY, T1.GENDER, T1.SALARY, T1.DEPARTMENT_ID) VALUES (T2.NAME, T2.BIRTHDAY, T2.GENDER, T2.SALARY, T2.DEPARTMENT_ID)
```





## PL/SQL
