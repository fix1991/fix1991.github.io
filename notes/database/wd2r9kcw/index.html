<!doctype html><html lang="zh-CN"><head><meta charset="utf-8" /><meta name="viewport" content="width=device-width,initial-scale=1" /><meta name="generator" content="VuePress 2.0.0-rc.18" /><meta name="theme" content="VuePress Theme Plume " /><script id="check-mac-os">document.documentElement.classList.toggle('mac', /Mac|iPhone|iPod|iPad/i.test(navigator.platform))</script><script id="check-dark-mode">;(function () {const um= localStorage.getItem('vuepress-theme-appearance') || 'auto';const sm = window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches;const isDark = um === 'dark' || (um !== 'light' && sm);document.documentElement.dataset.theme = isDark ? 'dark' : 'light';})();</script><link rel="icon" href="/favicon.ico"><title>Redis高可用机制 | Fix1991</title><meta name="description" content="Fix1991"><link rel="preload" href="/assets/style-kfZVMxxs.css" as="style"><link rel="stylesheet" href="/assets/style-kfZVMxxs.css"><link rel="modulepreload" href="/assets/app-dwrF6lVS.js"><link rel="modulepreload" href="/assets/index.html-Dl9FP-rQ.js"><link rel="prefetch" href="/assets/index.html-CtEiaprw.js" as="script"><link rel="prefetch" href="/assets/index.html-DAiMvQKU.js" as="script"><link rel="prefetch" href="/assets/index.html-K4ZZq6UL.js" as="script"><link rel="prefetch" href="/assets/index.html-_Rjnqxlz.js" as="script"><link rel="prefetch" href="/assets/index.html-C4DibYO7.js" as="script"><link rel="prefetch" href="/assets/index.html-BlaZMIIc.js" as="script"><link rel="prefetch" href="/assets/index.html-D-PblRbn.js" as="script"><link rel="prefetch" href="/assets/index.html-BnREb9Uc.js" as="script"><link rel="prefetch" href="/assets/index.html-BzHfcbsV.js" as="script"><link rel="prefetch" href="/assets/index.html-DAFXbZeG.js" as="script"><link rel="prefetch" href="/assets/index.html-Csg5f3Ai.js" as="script"><link rel="prefetch" href="/assets/index.html-uzk2wGs5.js" as="script"><link rel="prefetch" href="/assets/index.html-Rkb-b7aQ.js" as="script"><link rel="prefetch" href="/assets/index.html-4Z1IN_AN.js" as="script"><link rel="prefetch" href="/assets/index.html-BfJH0v_O.js" as="script"><link rel="prefetch" href="/assets/index.html-9SYNlsm2.js" as="script"><link rel="prefetch" href="/assets/index.html-BTVEEJ-I.js" as="script"><link rel="prefetch" href="/assets/index.html-DiDgeBJT.js" as="script"><link rel="prefetch" href="/assets/index.html-BNEdhWR2.js" as="script"><link rel="prefetch" href="/assets/index.html-BEiUhawv.js" as="script"><link rel="prefetch" href="/assets/index.html-DYFwANYH.js" as="script"><link rel="prefetch" href="/assets/index.html-Cipb4Mma.js" as="script"><link rel="prefetch" href="/assets/index.html-BQni4EN-.js" as="script"><link rel="prefetch" href="/assets/index.html-CCh3b-Bw.js" as="script"><link rel="prefetch" href="/assets/index.html-B9k_tVPn.js" as="script"><link rel="prefetch" href="/assets/index.html-BHG62joI.js" as="script"><link rel="prefetch" href="/assets/index.html-Gbgz34Sm.js" as="script"><link rel="prefetch" href="/assets/index.html-Dz-QoTS6.js" as="script"><link rel="prefetch" href="/assets/index.html-DpVc3U67.js" as="script"><link rel="prefetch" href="/assets/index.html-DrtL5KlU.js" as="script"><link rel="prefetch" href="/assets/index.html-cOd-1wK7.js" as="script"><link rel="prefetch" href="/assets/index.html-hDZK_MaQ.js" as="script"><link rel="prefetch" href="/assets/index.html-BHfRI0P5.js" as="script"><link rel="prefetch" href="/assets/index.html-2blee9_n.js" as="script"><link rel="prefetch" href="/assets/index.html-CS-27XeJ.js" as="script"><link rel="prefetch" href="/assets/index.html-B4WAjG6G.js" as="script"><link rel="prefetch" href="/assets/index.html-B9oD_7mo.js" as="script"><link rel="prefetch" href="/assets/index.html-DxzR7uUu.js" as="script"><link rel="prefetch" href="/assets/index.html-BNJdtgng.js" as="script"><link rel="prefetch" href="/assets/index.html-BET7ZG9L.js" as="script"><link rel="prefetch" href="/assets/index.html-B3fWMd00.js" as="script"><link rel="prefetch" href="/assets/index.html-BSVdqWCR.js" as="script"><link rel="prefetch" href="/assets/index.html-BoMvnAZS.js" as="script"><link rel="prefetch" href="/assets/index.html-g7z86Bcl.js" as="script"><link rel="prefetch" href="/assets/index.html-DX5baOdY.js" as="script"><link rel="prefetch" href="/assets/index.html-Dgjwdlmw.js" as="script"><link rel="prefetch" href="/assets/index.html-D_NzCrPn.js" as="script"><link rel="prefetch" href="/assets/index.html-CvIAZjCg.js" as="script"><link rel="prefetch" href="/assets/index.html-Bxy4C7w-.js" as="script"><link rel="prefetch" href="/assets/index.html-Cz-ZrYRg.js" as="script"><link rel="prefetch" href="/assets/index.html-DYJ3MriY.js" as="script"><link rel="prefetch" href="/assets/index.html-BYVmxdUs.js" as="script"><link rel="prefetch" href="/assets/index.html-wyZNvY3R.js" as="script"><link rel="prefetch" href="/assets/index.html-C0caMIes.js" as="script"><link rel="prefetch" href="/assets/index.html-DJfbjtki.js" as="script"><link rel="prefetch" href="/assets/index.html-C8Oj83JN.js" as="script"><link rel="prefetch" href="/assets/index.html-DIlYIOGA.js" as="script"><link rel="prefetch" href="/assets/index.html-DnL4gBKn.js" as="script"><link rel="prefetch" href="/assets/index.html-3GGouQzm.js" as="script"><link rel="prefetch" href="/assets/index.html-D2Mdh457.js" as="script"><link rel="prefetch" href="/assets/index.html-Duf_o8o_.js" as="script"><link rel="prefetch" href="/assets/index.html-CIVt0f5m.js" as="script"><link rel="prefetch" href="/assets/index.html-BPdn1R4g.js" as="script"><link rel="prefetch" href="/assets/index.html-BSQu3_xc.js" as="script"><link rel="prefetch" href="/assets/index.html-Ch27ZBcl.js" as="script"><link rel="prefetch" href="/assets/index.html-tXqYJUN5.js" as="script"><link rel="prefetch" href="/assets/index.html-BFUrIYF3.js" as="script"><link rel="prefetch" href="/assets/index.html-BtRO49aQ.js" as="script"><link rel="prefetch" href="/assets/index.html-3NVkEdBQ.js" as="script"><link rel="prefetch" href="/assets/index.html-DOEjGWgf.js" as="script"><link rel="prefetch" href="/assets/index.html-DNcAfaZQ.js" as="script"><link rel="prefetch" href="/assets/index.html-DTmfMYFe.js" as="script"><link rel="prefetch" href="/assets/index.html-BSFEkIX1.js" as="script"><link rel="prefetch" href="/assets/index.html-CLfglXve.js" as="script"><link rel="prefetch" href="/assets/index.html-DntEgRA4.js" as="script"><link rel="prefetch" href="/assets/index.html-B6lYTGQI.js" as="script"><link rel="prefetch" href="/assets/index.html-Cz62hFab.js" as="script"><link rel="prefetch" href="/assets/index.html-xkLr7EQe.js" as="script"><link rel="prefetch" href="/assets/index.html-Dhn9q5uN.js" as="script"><link rel="prefetch" href="/assets/index.html-r0Q_t3um.js" as="script"><link rel="prefetch" href="/assets/index.html-CN5Jw7sr.js" as="script"><link rel="prefetch" href="/assets/index.html-BGY_GP2n.js" as="script"><link rel="prefetch" href="/assets/index.html-nFKt8gCF.js" as="script"><link rel="prefetch" href="/assets/index.html-63xQ6PV7.js" as="script"><link rel="prefetch" href="/assets/index.html-Dn_7MbnU.js" as="script"><link rel="prefetch" href="/assets/index.html-BJmpS9YG.js" as="script"><link rel="prefetch" href="/assets/index.html-OEe7Px5B.js" as="script"><link rel="prefetch" href="/assets/index.html-Cx-B7JCw.js" as="script"><link rel="prefetch" href="/assets/index.html-Bg3_BYnY.js" as="script"><link rel="prefetch" href="/assets/index.html-Br4g_PDe.js" as="script"><link rel="prefetch" href="/assets/index.html-DubwBkuL.js" as="script"><link rel="prefetch" href="/assets/index.html-HIQVVrKg.js" as="script"><link rel="prefetch" href="/assets/index.html-CU4zVXV1.js" as="script"><link rel="prefetch" href="/assets/index.html-CWqPcyKy.js" as="script"><link rel="prefetch" href="/assets/index.html-DW0B-Gfb.js" as="script"><link rel="prefetch" href="/assets/index.html-DpJSYsMZ.js" as="script"><link rel="prefetch" href="/assets/index.html-C4vKxRPg.js" as="script"><link rel="prefetch" href="/assets/index.html-Dai87JiH.js" as="script"><link rel="prefetch" href="/assets/index.html-zX8vWR_q.js" as="script"><link rel="prefetch" href="/assets/index.html-CN5jFHgK.js" as="script"><link rel="prefetch" href="/assets/index.html-5iiCBsiK.js" as="script"><link rel="prefetch" href="/assets/index.html-DtMQ1ohy.js" as="script"><link rel="prefetch" href="/assets/index.html-C2FZT8Tj.js" as="script"><link rel="prefetch" href="/assets/index.html-Dw0KM9bI.js" as="script"><link rel="prefetch" href="/assets/index.html-C2t-75K_.js" as="script"><link rel="prefetch" href="/assets/index.html-DvOGBhVR.js" as="script"><link rel="prefetch" href="/assets/index.html-BkAhnMM-.js" as="script"><link rel="prefetch" href="/assets/index.html-BsFgapik.js" as="script"><link rel="prefetch" href="/assets/index.html-BiAdPNEm.js" as="script"><link rel="prefetch" href="/assets/index.html-DNcHYMHl.js" as="script"><link rel="prefetch" href="/assets/index.html-bSeIfh0i.js" as="script"><link rel="prefetch" href="/assets/index.html-DDhpdVZ3.js" as="script"><link rel="prefetch" href="/assets/index.html-zqSpnvTO.js" as="script"><link rel="prefetch" href="/assets/index.html-B8jO3qLO.js" as="script"><link rel="prefetch" href="/assets/index.html-BzqvVYg5.js" as="script"><link rel="prefetch" href="/assets/index.html-DIcurAs-.js" as="script"><link rel="prefetch" href="/assets/index.html-BnRz983l.js" as="script"><link rel="prefetch" href="/assets/index.html-CFLmuS25.js" as="script"><link rel="prefetch" href="/assets/index.html-BFA-lv6G.js" as="script"><link rel="prefetch" href="/assets/index.html-BbzifZ4C.js" as="script"><link rel="prefetch" href="/assets/index.html-j6svvQUG.js" as="script"><link rel="prefetch" href="/assets/index.html-Dfo1HGJx.js" as="script"><link rel="prefetch" href="/assets/index.html-CFR8Tv0N.js" as="script"><link rel="prefetch" href="/assets/index.html-CuC-BRv-.js" as="script"><link rel="prefetch" href="/assets/index.html-B6YReEwN.js" as="script"><link rel="prefetch" href="/assets/index.html-BwLNp909.js" as="script"><link rel="prefetch" href="/assets/index.html-CwsKtsY9.js" as="script"><link rel="prefetch" href="/assets/index.html-CjLr8tS7.js" as="script"><link rel="prefetch" href="/assets/index.html-B1DQHKV3.js" as="script"><link rel="prefetch" href="/assets/index.html-Bh37eTqG.js" as="script"><link rel="prefetch" href="/assets/index.html-F_eU9ed2.js" as="script"><link rel="prefetch" href="/assets/index.html-DZrHfYYl.js" as="script"><link rel="prefetch" href="/assets/index.html-B96sWZGj.js" as="script"><link rel="prefetch" href="/assets/index.html-DVojPfeG.js" as="script"><link rel="prefetch" href="/assets/index.html-B13eJt7Q.js" as="script"><link rel="prefetch" href="/assets/index.html-oY1Na22d.js" as="script"><link rel="prefetch" href="/assets/index.html-BTHgsvug.js" as="script"><link rel="prefetch" href="/assets/index.html-DKXBHw_L.js" as="script"><link rel="prefetch" href="/assets/index.html-CRj-4JCe.js" as="script"><link rel="prefetch" href="/assets/index.html-C9I2pwh3.js" as="script"><link rel="prefetch" href="/assets/index.html-BPKRFi8Z.js" as="script"><link rel="prefetch" href="/assets/index.html-CJyvwmW5.js" as="script"><link rel="prefetch" href="/assets/index.html-DGztKJce.js" as="script"><link rel="prefetch" href="/assets/index.html-C159jrl2.js" as="script"><link rel="prefetch" href="/assets/index.html-CQl7szMr.js" as="script"><link rel="prefetch" href="/assets/index.html-CvVNDKRS.js" as="script"><link rel="prefetch" href="/assets/index.html-KwnGAIGz.js" as="script"><link rel="prefetch" href="/assets/index.html-DM-P8Lj6.js" as="script"><link rel="prefetch" href="/assets/index.html-B03voUKo.js" as="script"><link rel="prefetch" href="/assets/index.html-BYwlPuzy.js" as="script"><link rel="prefetch" href="/assets/index.html-BeZMpjHe.js" as="script"><link rel="prefetch" href="/assets/index.html-DsuY-B0Z.js" as="script"><link rel="prefetch" href="/assets/index.html-BKtI3KZ2.js" as="script"><link rel="prefetch" href="/assets/index.html-DpLm1YNH.js" as="script"><link rel="prefetch" href="/assets/index.html-BNdRsxXx.js" as="script"><link rel="prefetch" href="/assets/index.html-C6B7xV0k.js" as="script"><link rel="prefetch" href="/assets/index.html-B5ocazX8.js" as="script"><link rel="prefetch" href="/assets/index.html-Daq6O14O.js" as="script"><link rel="prefetch" href="/assets/index.html-opFBsWIj.js" as="script"><link rel="prefetch" href="/assets/index.html-ZX7gwfKL.js" as="script"><link rel="prefetch" href="/assets/index.html-BNOtpbV8.js" as="script"><link rel="prefetch" href="/assets/index.html-Cirqbune.js" as="script"><link rel="prefetch" href="/assets/index.html-CuEgnVdC.js" as="script"><link rel="prefetch" href="/assets/index.html-CygRJ_NH.js" as="script"><link rel="prefetch" href="/assets/index.html-CBLnjnwI.js" as="script"><link rel="prefetch" href="/assets/index.html-_hsyV1MW.js" as="script"><link rel="prefetch" href="/assets/index.html-MAw93KkF.js" as="script"><link rel="prefetch" href="/assets/index.html-SJ2lvDKv.js" as="script"><link rel="prefetch" href="/assets/index.html-D0LlvkIj.js" as="script"><link rel="prefetch" href="/assets/index.html-AxNTnM3-.js" as="script"><link rel="prefetch" href="/assets/index.html-ChrcWtGf.js" as="script"><link rel="prefetch" href="/assets/index.html-BIqQThp8.js" as="script"><link rel="prefetch" href="/assets/index.html-998ca0Vz.js" as="script"><link rel="prefetch" href="/assets/index.html-Drp_-IHS.js" as="script"><link rel="prefetch" href="/assets/index.html-DW1mH6g3.js" as="script"><link rel="prefetch" href="/assets/index.html-vv7InRVc.js" as="script"><link rel="prefetch" href="/assets/index.html-Bin7NENB.js" as="script"><link rel="prefetch" href="/assets/index.html-BxeSZ01O.js" as="script"><link rel="prefetch" href="/assets/index.html-CM2TOvYA.js" as="script"><link rel="prefetch" href="/assets/index.html-DjKqjUxH.js" as="script"><link rel="prefetch" href="/assets/index.html-CI3F-XAn.js" as="script"><link rel="prefetch" href="/assets/index.html-BsIDslJO.js" as="script"><link rel="prefetch" href="/assets/index.html-C0xJxzKD.js" as="script"><link rel="prefetch" href="/assets/index.html-CaMsDMlT.js" as="script"><link rel="prefetch" href="/assets/index.html-jsLHQ0K-.js" as="script"><link rel="prefetch" href="/assets/index.html-DpAvr2DY.js" as="script"><link rel="prefetch" href="/assets/index.html-Dyi5lQFS.js" as="script"><link rel="prefetch" href="/assets/index.html-DsVYD6BS.js" as="script"><link rel="prefetch" href="/assets/index.html-CE-ChE-z.js" as="script"><link rel="prefetch" href="/assets/index.html-8H7PgSuS.js" as="script"><link rel="prefetch" href="/assets/index.html-FQmFd53Q.js" as="script"><link rel="prefetch" href="/assets/index.html-CYifS_H8.js" as="script"><link rel="prefetch" href="/assets/index.html-BalIgbFT.js" as="script"><link rel="prefetch" href="/assets/index.html-wXTrquDM.js" as="script"><link rel="prefetch" href="/assets/index.html-BSwtrPR5.js" as="script"><link rel="prefetch" href="/assets/index.html-B-04ZROv.js" as="script"><link rel="prefetch" href="/assets/index.html-BQJ_Xs5z.js" as="script"><link rel="prefetch" href="/assets/index.html-D7iAza8B.js" as="script"><link rel="prefetch" href="/assets/index.html-Gl_n9XEf.js" as="script"><link rel="prefetch" href="/assets/index.html-qrcEXYBR.js" as="script"><link rel="prefetch" href="/assets/index.html-DrLpqY8L.js" as="script"><link rel="prefetch" href="/assets/index.html-DVQtBh4d.js" as="script"><link rel="prefetch" href="/assets/index.html-nUT8GfnL.js" as="script"><link rel="prefetch" href="/assets/index.html-2D97ZGkH.js" as="script"><link rel="prefetch" href="/assets/index.html-tbyV6WMP.js" as="script"><link rel="prefetch" href="/assets/index.html-BNUQovei.js" as="script"><link rel="prefetch" href="/assets/index.html-Dl72pC7r.js" as="script"><link rel="prefetch" href="/assets/index.html-9vm5rC0q.js" as="script"><link rel="prefetch" href="/assets/index.html-COo4vB6T.js" as="script"><link rel="prefetch" href="/assets/index.html-DXlgDghH.js" as="script"><link rel="prefetch" href="/assets/index.html-3B23hF3l.js" as="script"><link rel="prefetch" href="/assets/index.html-CCsAH77H.js" as="script"><link rel="prefetch" href="/assets/index.html-CG_ADtM2.js" as="script"><link rel="prefetch" href="/assets/index.html-Clayet3c.js" as="script"><link rel="prefetch" href="/assets/index.html-WDh2YuI-.js" as="script"><link rel="prefetch" href="/assets/index.html-D73hfbQm.js" as="script"><link rel="prefetch" href="/assets/index.html-CqlIFPKb.js" as="script"><link rel="prefetch" href="/assets/index.html-CtU0wYWF.js" as="script"><link rel="prefetch" href="/assets/index.html-Bav7ZxML.js" as="script"><link rel="prefetch" href="/assets/index.html-a1vrAFQZ.js" as="script"><link rel="prefetch" href="/assets/index.html-Cej2tEZK.js" as="script"><link rel="prefetch" href="/assets/index.html-CtcBxU9p.js" as="script"><link rel="prefetch" href="/assets/index.html-oF1bSV2d.js" as="script"><link rel="prefetch" href="/assets/index.html-52ar3Q1P.js" as="script"><link rel="prefetch" href="/assets/index.html-BW_3zexV.js" as="script"><link rel="prefetch" href="/assets/index.html-D0Ouvi_s.js" as="script"><link rel="prefetch" href="/assets/index.html-B5gjHNn_.js" as="script"><link rel="prefetch" href="/assets/index.html-BKOZpylX.js" as="script"><link rel="prefetch" href="/assets/index.html-CWvCJSlg.js" as="script"><link rel="prefetch" href="/assets/index.html-DR591I_V.js" as="script"><link rel="prefetch" href="/assets/index.html-CivQkGWQ.js" as="script"><link rel="prefetch" href="/assets/index.html-Dyyp2NDY.js" as="script"><link rel="prefetch" href="/assets/index.html-C2TB8a4q.js" as="script"><link rel="prefetch" href="/assets/index.html-DDKSp6-j.js" as="script"><link rel="prefetch" href="/assets/index.html-CgR8GAx0.js" as="script"><link rel="prefetch" href="/assets/index.html-FMilF-se.js" as="script"><link rel="prefetch" href="/assets/index.html-TcXD7b8p.js" as="script"><link rel="prefetch" href="/assets/index.html-BoSonz9g.js" as="script"><link rel="prefetch" href="/assets/index.html-DJiEBElz.js" as="script"><link rel="prefetch" href="/assets/index.html-5lrLMk0y.js" as="script"><link rel="prefetch" href="/assets/index.html-BZalx1th.js" as="script"><link rel="prefetch" href="/assets/index.html-BVEYeLnX.js" as="script"><link rel="prefetch" href="/assets/index.html-CNsosfF_.js" as="script"><link rel="prefetch" href="/assets/index.html-9sCQVpn1.js" as="script"><link rel="prefetch" href="/assets/index.html-DQ5dxA0G.js" as="script"><link rel="prefetch" href="/assets/index.html-CrFABdgE.js" as="script"><link rel="prefetch" href="/assets/index.html-BzU9dG6J.js" as="script"><link rel="prefetch" href="/assets/index.html-Cs_4KehS.js" as="script"><link rel="prefetch" href="/assets/index.html-fttQFxbk.js" as="script"><link rel="prefetch" href="/assets/index.html-CF62v_yV.js" as="script"><link rel="prefetch" href="/assets/index.html-CNdPMBLS.js" as="script"><link rel="prefetch" href="/assets/index.html-CSZqxbpB.js" as="script"><link rel="prefetch" href="/assets/index.html-CYvDEJdS.js" as="script"><link rel="prefetch" href="/assets/index.html-DGgcICLQ.js" as="script"><link rel="prefetch" href="/assets/index.html-DuZDWD9e.js" as="script"><link rel="prefetch" href="/assets/index.html-bsmxuTjK.js" as="script"><link rel="prefetch" href="/assets/index.html-CEh3YXlj.js" as="script"><link rel="prefetch" href="/assets/index.html-BAA2kyG4.js" as="script"><link rel="prefetch" href="/assets/index.html-BsAb4mRo.js" as="script"><link rel="prefetch" href="/assets/index.html-CqBcy5GK.js" as="script"><link rel="prefetch" href="/assets/index.html-D6JRyI8S.js" as="script"><link rel="prefetch" href="/assets/index.html-D-Sc13Y6.js" as="script"><link rel="prefetch" href="/assets/index.html-j91c3S97.js" as="script"><link rel="prefetch" href="/assets/index.html-Bf1nKDEm.js" as="script"><link rel="prefetch" href="/assets/index.html-BzgF-wXK.js" as="script"><link rel="prefetch" href="/assets/index.html-BsxBGL-S.js" as="script"><link rel="prefetch" href="/assets/index.html-Dmy-Ypfh.js" as="script"><link rel="prefetch" href="/assets/index.html-DenDS4AO.js" as="script"><link rel="prefetch" href="/assets/index.html-ZBaEG6pB.js" as="script"><link rel="prefetch" href="/assets/index.html-IM7MdIYv.js" as="script"><link rel="prefetch" href="/assets/index.html-BM_27e2L.js" as="script"><link rel="prefetch" href="/assets/index.html-BDlc0ODu.js" as="script"><link rel="prefetch" href="/assets/index.html-Kq12ZzGn.js" as="script"><link rel="prefetch" href="/assets/index.html-Byt0AUzp.js" as="script"><link rel="prefetch" href="/assets/index.html-DU03Tvry.js" as="script"><link rel="prefetch" href="/assets/index.html-Du9d5PnY.js" as="script"><link rel="prefetch" href="/assets/index.html-DJObuOa1.js" as="script"><link rel="prefetch" href="/assets/index.html-BCbRfo6n.js" as="script"><link rel="prefetch" href="/assets/index.html-DgoXAYMI.js" as="script"><link rel="prefetch" href="/assets/index.html-DCYpaZ6P.js" as="script"><link rel="prefetch" href="/assets/index.html-LIrNLGft.js" as="script"><link rel="prefetch" href="/assets/index.html-BzLdvI0q.js" as="script"><link rel="prefetch" href="/assets/index.html-CYeAw7xe.js" as="script"><link rel="prefetch" href="/assets/index.html-Bs0FPxCo.js" as="script"><link rel="prefetch" href="/assets/index.html-Dua2Ecpo.js" as="script"><link rel="prefetch" href="/assets/index.html-CbuW8MWT.js" as="script"><link rel="prefetch" href="/assets/index.html-D4p-EML0.js" as="script"><link rel="prefetch" href="/assets/index.html-DHaMjiqy.js" as="script"><link rel="prefetch" href="/assets/index.html-DhRq4QTJ.js" as="script"><link rel="prefetch" href="/assets/index.html-CpHz36_0.js" as="script"><link rel="prefetch" href="/assets/index.html-CqoA011U.js" as="script"><link rel="prefetch" href="/assets/index.html-SQDFLn-5.js" as="script"><link rel="prefetch" href="/assets/index.html-jBr4ATit.js" as="script"><link rel="prefetch" href="/assets/404.html-CUhBL87s.js" as="script"><link rel="prefetch" href="/assets/index.html-BT36enXZ.js" as="script"><link rel="prefetch" href="/assets/index.html-cmGNi3S7.js" as="script"><link rel="prefetch" href="/assets/index.html-L5Hu7ju6.js" as="script"><link rel="prefetch" href="/assets/index.html-CXbcUcAj.js" as="script"><link rel="prefetch" href="/assets/photoswipe.esm-GXRgw7eJ.js" as="script"><link rel="prefetch" href="/assets/searchBox-default-DGfK4LtX.js" as="script"><link rel="prefetch" href="/assets/SearchBox-DgePoqCN.js" as="script"><link rel="prefetch" href="/assets/setupDevtools-7MC2TMWH-CzvgiyeR.js" as="script"></head><body><div id="app"><!--[--><!--[--><div class="theme-plume vp-layout" vp-container data-v-68cd6b44><!--[--><!--[--><!--]--><!--[--><span tabindex="-1" data-v-d5a8d0bc></span><a href="#VPContent" class="vp-skip-link visually-hidden" data-v-d5a8d0bc> Skip to content </a><!--]--><!----><header class="vp-nav" data-v-68cd6b44 data-v-d34f28d6><div class="vp-navbar" vp-navbar data-v-d34f28d6 data-v-70d97d16><div class="wrapper" data-v-70d97d16><div class="container" data-v-70d97d16><div class="title" data-v-70d97d16><div class="vp-navbar-title has-sidebar" data-v-70d97d16 data-v-2c8d4622><a class="vp-link no-icon link title" href="/" data-v-2c8d4622 data-v-442a52aa><!--[--><!--[--><!--]--><!--[--><!--[--><!--[--><img class="vp-image dark logo" src="/favicon.ico" alt data-v-7fbfbc9b><!--]--><!--[--><img class="vp-image light logo" src="/favicon.ico" alt data-v-7fbfbc9b><!--]--><!--]--><!--]--><span data-v-2c8d4622>Fix1991</span><!--[--><!--]--><!--]--><!----></a></div></div><div class="content" data-v-70d97d16><div class="content-body" data-v-70d97d16><!--[--><!--]--><div class="vp-navbar-search search" data-v-70d97d16><div class="search-wrapper" data-v-97535d1e><!----><div id="local-search" data-v-97535d1e><button type="button" class="mini-search mini-search-button" aria-label="搜索文档" data-v-97535d1e><span class="mini-search-button-container"><svg class="mini-search-search-icon" width="20" height="20" viewBox="0 0 20 20" aria-label="search icon"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="mini-search-button-placeholder">搜索文档</span></span><span class="mini-search-button-keys"><kbd class="mini-search-button-key"></kbd><kbd class="mini-search-button-key">K</kbd></span></button></div></div></div><nav aria-labelledby="main-nav-aria-label" class="vp-navbar-menu menu" data-v-70d97d16 data-v-d43c1732><span id="main-nav-aria-label" class="visually-hidden" data-v-d43c1732>Main Navigation</span><!--[--><!--[--><a class="vp-link no-icon link navbar-menu-link" href="/" tabindex="0" data-v-d43c1732 data-v-9970a379 data-v-442a52aa><!--[--><!----><span data-v-9970a379>首页</span><!--]--><!----></a><!--]--><!--[--><div class="vp-flyout vp-navbar-menu-group" data-v-d43c1732 data-v-feafea4e><button type="button" class="button" aria-haspopup="true" aria-expanded="false" data-v-feafea4e><span class="text" data-v-feafea4e><!----><!----><span data-v-feafea4e>笔记</span><span class="vpi-chevron-down text-icon" data-v-feafea4e></span></span></button><div class="menu" data-v-feafea4e><div class="vp-menu" data-v-feafea4e data-v-709dc2b1><div class="items" data-v-709dc2b1><!--[--><!--[--><div class="vp-menu-link" data-v-709dc2b1 data-v-aaf95230><a class="vp-link no-icon link" href="/notes/projects/1qx76q2b/" data-v-aaf95230 data-v-442a52aa><!--[--><!----> 项目<!--]--><!----></a></div><!--]--><!--[--><div class="vp-menu-link" data-v-709dc2b1 data-v-aaf95230><a class="vp-link no-icon link" href="/notes/java/33t6upvz/" data-v-aaf95230 data-v-442a52aa><!--[--><!----> Java<!--]--><!----></a></div><!--]--><!--[--><div class="vp-menu-link" data-v-709dc2b1 data-v-aaf95230><a class="vp-link no-icon link" href="/notes/python/3xdslzb9/" data-v-aaf95230 data-v-442a52aa><!--[--><!----> Python<!--]--><!----></a></div><!--]--><!--[--><div class="vp-menu-link" data-v-709dc2b1 data-v-aaf95230><a class="vp-link no-icon link" href="/notes/web/rypds3ps/" data-v-aaf95230 data-v-442a52aa><!--[--><!----> Web前端<!--]--><!----></a></div><!--]--><!--[--><div class="vp-menu-link" data-v-709dc2b1 data-v-aaf95230><a class="vp-link no-icon link" href="/notes/database/eu1e2o1d/" data-v-aaf95230 data-v-442a52aa><!--[--><!----> 数据库技术<!--]--><!----></a></div><!--]--><!--[--><div class="vp-menu-link" data-v-709dc2b1 data-v-aaf95230><a class="vp-link no-icon link" href="/notes/middleware/s5cgh29g/" data-v-aaf95230 data-v-442a52aa><!--[--><!----> 中间件技术<!--]--><!----></a></div><!--]--><!--[--><div class="vp-menu-link" data-v-709dc2b1 data-v-aaf95230><a class="vp-link no-icon link" href="/notes/miniprogram/#" data-v-aaf95230 data-v-442a52aa><!--[--><!----> 小程序开发<!--]--><!----></a></div><!--]--><!--[--><div class="vp-menu-link" data-v-709dc2b1 data-v-aaf95230><a class="vp-link no-icon link" href="/notes/ai/1wzp28iv/" data-v-aaf95230 data-v-442a52aa><!--[--><!----> AI<!--]--><!----></a></div><!--]--><!--[--><div class="vp-menu-link" data-v-709dc2b1 data-v-aaf95230><a class="vp-link no-icon link" href="/notes/cs/3djwb0qj/" data-v-aaf95230 data-v-442a52aa><!--[--><!----> 计算机基础<!--]--><!----></a></div><!--]--><!--[--><div class="vp-menu-link" data-v-709dc2b1 data-v-aaf95230><a class="vp-link no-icon link" href="/notes/#" data-v-aaf95230 data-v-442a52aa><!--[--><!----> 数学<!--]--><!----></a></div><!--]--><!--[--><div class="vp-menu-link" data-v-709dc2b1 data-v-aaf95230><a class="vp-link no-icon link" href="/notes/minecraft/vptuj4gv/" data-v-aaf95230 data-v-442a52aa><!--[--><!----> Minecraft<!--]--><!----></a></div><!--]--><!--[--><div class="vp-menu-link" data-v-709dc2b1 data-v-aaf95230><a class="vp-link no-icon link" href="/notes/#" data-v-aaf95230 data-v-442a52aa><!--[--><!----> 第三方服务<!--]--><!----></a></div><!--]--><!--[--><div class="vp-menu-link" data-v-709dc2b1 data-v-aaf95230><a class="vp-link no-icon link" href="/notes/web/rdbfieru/" data-v-aaf95230 data-v-442a52aa><!--[--><!----> 建站<!--]--><!----></a></div><!--]--><!--[--><div class="vp-menu-link" data-v-709dc2b1 data-v-aaf95230><a class="vp-link no-icon link" href="/notes/funs/dns3najj/" data-v-aaf95230 data-v-442a52aa><!--[--><!----> Fun things<!--]--><!----></a></div><!--]--><!--[--><div class="vp-menu-link" data-v-709dc2b1 data-v-aaf95230><a class="vp-link no-icon link" href="/notes/devtools/2sr7xao3/" data-v-aaf95230 data-v-442a52aa><!--[--><!----> 开发工具<!--]--><!----></a></div><!--]--><!--[--><div class="vp-menu-link" data-v-709dc2b1 data-v-aaf95230><a class="vp-link no-icon link" href="/notes/software/m56cz3l8/" data-v-aaf95230 data-v-442a52aa><!--[--><!----> 常用软件<!--]--><!----></a></div><!--]--><!--]--></div><!--[--><!--]--></div></div></div><!--]--><!--]--></nav><!----><div class="vp-navbar-appearance appearance" data-v-70d97d16 data-v-a295abf6><button class="vp-switch vp-switch-appearance" type="button" role="switch" title aria-checked="false" data-v-a295abf6 data-v-596c25a9 data-v-d84fedac><span class="check" data-v-d84fedac><span class="icon" data-v-d84fedac><!--[--><span class="vpi-sun sun" data-v-596c25a9></span><span class="vpi-moon moon" data-v-596c25a9></span><!--]--></span></span></button></div><div class="vp-social-links vp-navbar-social-links social-links" data-v-70d97d16 data-v-ad52545c data-v-40bac536><!--[--><a class="vp-social-link no-icon" href="https://github.com/ianping" aria-label="github" target="_blank" rel="noopener" data-v-40bac536 data-v-67b21932><span class="vpi-social-github" /></a><!--]--></div><div class="vp-flyout vp-navbar-extra extra" data-v-70d97d16 data-v-652282fd data-v-feafea4e><button type="button" class="button" aria-haspopup="true" aria-expanded="false" aria-label="extra navigation" data-v-feafea4e><span class="vpi-more-horizontal icon" data-v-feafea4e></span></button><div class="menu" data-v-feafea4e><div class="vp-menu" data-v-feafea4e data-v-709dc2b1><!----><!--[--><!--[--><!----><div class="group" data-v-652282fd><div class="item appearance" data-v-652282fd><p class="label" data-v-652282fd>外观</p><div class="appearance-action" data-v-652282fd><button class="vp-switch vp-switch-appearance" type="button" role="switch" title aria-checked="false" data-v-652282fd data-v-596c25a9 data-v-d84fedac><span class="check" data-v-d84fedac><span class="icon" data-v-d84fedac><!--[--><span class="vpi-sun sun" data-v-596c25a9></span><span class="vpi-moon moon" data-v-596c25a9></span><!--]--></span></span></button></div></div></div><div class="group" data-v-652282fd><div class="item social-links" data-v-652282fd><div class="vp-social-links social-links-list" data-v-652282fd data-v-40bac536><!--[--><a class="vp-social-link no-icon" href="https://github.com/ianping" aria-label="github" target="_blank" rel="noopener" data-v-40bac536 data-v-67b21932><span class="vpi-social-github" /></a><!--]--></div></div></div><!--]--><!--]--></div></div></div><!--[--><!--]--><button type="button" class="vp-navbar-hamburger hamburger" aria-label="mobile navigation" aria-expanded="false" aria-controls="nav-screen" data-v-70d97d16 data-v-2b50024d><span class="container" data-v-2b50024d><span class="top" data-v-2b50024d></span><span class="middle" data-v-2b50024d></span><span class="bottom" data-v-2b50024d></span></span></button></div></div></div></div><div class="divider" data-v-70d97d16><div class="divider-line" data-v-70d97d16></div></div></div><!----></header><div class="vp-local-nav reached-top is-blog" data-v-68cd6b44 data-v-1dc3518c><button class="menu" aria-expanded="false" aria-controls="SidebarNav" data-v-1dc3518c><span class="vpi-align-left menu-icon" data-v-1dc3518c></span><span class="menu-text" data-v-1dc3518c>Menu</span></button><div class="vp-local-nav-outline-dropdown" style="--vp-vh:0px;" data-v-1dc3518c data-v-423a73ec><button data-v-423a73ec>返回顶部</button><!----></div></div><aside class="vp-sidebar" vp-sidebar data-v-68cd6b44 data-v-360082b7><div class="curtain" data-v-360082b7></div><nav id="SidebarNav" class="nav" aria-labelledby="sidebar-aria-label" tabindex="-1" data-v-360082b7><span id="sidebar-aria-label" class="visually-hidden" data-v-360082b7> Sidebar Navigation </span><!--[--><!--]--><!--[--><div class="no-transition group" data-v-473fd05b><section class="vp-sidebar-item sidebar-item level-0 collapsible" data-v-473fd05b data-v-b88148be><div class="item" role="button" tabindex="0" data-v-b88148be><div class="indicator" data-v-b88148be></div><!----><h2 class="text" data-v-b88148be>sql</h2><div class="caret" role="button" aria-label="toggle section" tabindex="0" data-v-b88148be><span class="vpi-chevron-right caret-icon" data-v-b88148be></span></div></div><div class="items" data-v-b88148be><!--[--><div class="vp-sidebar-item sidebar-item level-1 is-link" data-v-b88148be data-v-b88148be><div class="item" data-v-b88148be><div class="indicator" data-v-b88148be></div><!----><a class="vp-link no-icon link link" href="/notes/database/6jownszu/" data-v-b88148be data-v-442a52aa><!--[--><p class="text" data-v-b88148be>sql增删改</p><!--]--><!----></a><!----></div><!----></div><div class="vp-sidebar-item sidebar-item level-1 is-link" data-v-b88148be data-v-b88148be><div class="item" data-v-b88148be><div class="indicator" data-v-b88148be></div><!----><a class="vp-link no-icon link link" href="/notes/database/pqmd808e/" data-v-b88148be data-v-442a52aa><!--[--><p class="text" data-v-b88148be>sql数据库和表</p><!--]--><!----></a><!----></div><!----></div><div class="vp-sidebar-item sidebar-item level-1 is-link" data-v-b88148be data-v-b88148be><div class="item" data-v-b88148be><div class="indicator" data-v-b88148be></div><!----><a class="vp-link no-icon link link" href="/notes/database/eu1e2o1d/" data-v-b88148be data-v-442a52aa><!--[--><p class="text" data-v-b88148be>sql查询</p><!--]--><!----></a><!----></div><!----></div><div class="vp-sidebar-item sidebar-item level-1 is-link" data-v-b88148be data-v-b88148be><div class="item" data-v-b88148be><div class="indicator" data-v-b88148be></div><!----><a class="vp-link no-icon link link" href="/notes/database/d6uyf0ll/" data-v-b88148be data-v-442a52aa><!--[--><p class="text" data-v-b88148be>sql经典实例</p><!--]--><!----></a><!----></div><!----></div><!--]--></div></section></div><div class="no-transition group" data-v-473fd05b><section class="vp-sidebar-item sidebar-item level-0 collapsible" data-v-473fd05b data-v-b88148be><div class="item" role="button" tabindex="0" data-v-b88148be><div class="indicator" data-v-b88148be></div><!----><h2 class="text" data-v-b88148be>mysql</h2><div class="caret" role="button" aria-label="toggle section" tabindex="0" data-v-b88148be><span class="vpi-chevron-right caret-icon" data-v-b88148be></span></div></div><div class="items" data-v-b88148be><!--[--><div class="vp-sidebar-item sidebar-item level-1 is-link" data-v-b88148be data-v-b88148be><div class="item" data-v-b88148be><div class="indicator" data-v-b88148be></div><!----><a class="vp-link no-icon link link" href="/notes/database/j8gjhfss/" data-v-b88148be data-v-442a52aa><!--[--><p class="text" data-v-b88148be>mysql事务</p><!--]--><!----></a><!----></div><!----></div><div class="vp-sidebar-item sidebar-item level-1 is-link" data-v-b88148be data-v-b88148be><div class="item" data-v-b88148be><div class="indicator" data-v-b88148be></div><!----><a class="vp-link no-icon link link" href="/notes/database/09n612a4/" data-v-b88148be data-v-442a52aa><!--[--><p class="text" data-v-b88148be>mysql安装</p><!--]--><!----></a><!----></div><!----></div><div class="vp-sidebar-item sidebar-item level-1 is-link" data-v-b88148be data-v-b88148be><div class="item" data-v-b88148be><div class="indicator" data-v-b88148be></div><!----><a class="vp-link no-icon link link" href="/notes/database/6ixixr0m/" data-v-b88148be data-v-442a52aa><!--[--><p class="text" data-v-b88148be>mysql索引</p><!--]--><!----></a><!----></div><!----></div><div class="vp-sidebar-item sidebar-item level-1 is-link" data-v-b88148be data-v-b88148be><div class="item" data-v-b88148be><div class="indicator" data-v-b88148be></div><!----><a class="vp-link no-icon link link" href="/notes/database/p4jf04mv/" data-v-b88148be data-v-442a52aa><!--[--><p class="text" data-v-b88148be>mysql集群</p><!--]--><!----></a><!----></div><!----></div><!--]--></div></section></div><div class="no-transition group" data-v-473fd05b><section class="vp-sidebar-item sidebar-item level-0 collapsible" data-v-473fd05b data-v-b88148be><div class="item" role="button" tabindex="0" data-v-b88148be><div class="indicator" data-v-b88148be></div><!----><h2 class="text" data-v-b88148be>postgresql</h2><div class="caret" role="button" aria-label="toggle section" tabindex="0" data-v-b88148be><span class="vpi-chevron-right caret-icon" data-v-b88148be></span></div></div><div class="items" data-v-b88148be><!--[--><div class="vp-sidebar-item sidebar-item level-1 is-link" data-v-b88148be data-v-b88148be><div class="item" data-v-b88148be><div class="indicator" data-v-b88148be></div><!----><a class="vp-link no-icon link link" href="/notes/database/ngio4cr2/" data-v-b88148be data-v-442a52aa><!--[--><p class="text" data-v-b88148be>postgresql安装</p><!--]--><!----></a><!----></div><!----></div><div class="vp-sidebar-item sidebar-item level-1 is-link" data-v-b88148be data-v-b88148be><div class="item" data-v-b88148be><div class="indicator" data-v-b88148be></div><!----><a class="vp-link no-icon link link" href="/notes/database/e5rtxj1r/" data-v-b88148be data-v-442a52aa><!--[--><p class="text" data-v-b88148be>postgresql函数</p><!--]--><!----></a><!----></div><!----></div><div class="vp-sidebar-item sidebar-item level-1 is-link" data-v-b88148be data-v-b88148be><div class="item" data-v-b88148be><div class="indicator" data-v-b88148be></div><!----><a class="vp-link no-icon link link" href="/notes/database/n5c21y7u/" data-v-b88148be data-v-442a52aa><!--[--><p class="text" data-v-b88148be>postgresql服务器管理</p><!--]--><!----></a><!----></div><!----></div><!--]--></div></section></div><div class="no-transition group" data-v-473fd05b><section class="vp-sidebar-item sidebar-item level-0 collapsible" data-v-473fd05b data-v-b88148be><div class="item" role="button" tabindex="0" data-v-b88148be><div class="indicator" data-v-b88148be></div><!----><h2 class="text" data-v-b88148be>oracle</h2><div class="caret" role="button" aria-label="toggle section" tabindex="0" data-v-b88148be><span class="vpi-chevron-right caret-icon" data-v-b88148be></span></div></div><div class="items" data-v-b88148be><!--[--><div class="vp-sidebar-item sidebar-item level-1 is-link" data-v-b88148be data-v-b88148be><div class="item" data-v-b88148be><div class="indicator" data-v-b88148be></div><!----><a class="vp-link no-icon link link" href="/notes/database/irxnl9ai/" data-v-b88148be data-v-442a52aa><!--[--><p class="text" data-v-b88148be>Oracle基础</p><!--]--><!----></a><!----></div><!----></div><div class="vp-sidebar-item sidebar-item level-1 is-link" data-v-b88148be data-v-b88148be><div class="item" data-v-b88148be><div class="indicator" data-v-b88148be></div><!----><a class="vp-link no-icon link link" href="/notes/database/j80kyty0/" data-v-b88148be data-v-442a52aa><!--[--><p class="text" data-v-b88148be>Oracle安装</p><!--]--><!----></a><!----></div><!----></div><div class="vp-sidebar-item sidebar-item level-1 is-link" data-v-b88148be data-v-b88148be><div class="item" data-v-b88148be><div class="indicator" data-v-b88148be></div><!----><a class="vp-link no-icon link link" href="/notes/database/fxwd3dqr/" data-v-b88148be data-v-442a52aa><!--[--><p class="text" data-v-b88148be>Oracle进阶</p><!--]--><!----></a><!----></div><!----></div><!--]--></div></section></div><div class="no-transition group" data-v-473fd05b><section class="vp-sidebar-item sidebar-item level-0 collapsible has-active" data-v-473fd05b data-v-b88148be><div class="item" role="button" tabindex="0" data-v-b88148be><div class="indicator" data-v-b88148be></div><!----><h2 class="text" data-v-b88148be>redis</h2><div class="caret" role="button" aria-label="toggle section" tabindex="0" data-v-b88148be><span class="vpi-chevron-right caret-icon" data-v-b88148be></span></div></div><div class="items" data-v-b88148be><!--[--><div class="vp-sidebar-item sidebar-item level-1 is-link" data-v-b88148be data-v-b88148be><div class="item" data-v-b88148be><div class="indicator" data-v-b88148be></div><!----><a class="vp-link no-icon link link" href="/notes/database/8rhh5i1u/" data-v-b88148be data-v-442a52aa><!--[--><p class="text" data-v-b88148be>Redis环境</p><!--]--><!----></a><!----></div><!----></div><div class="vp-sidebar-item sidebar-item level-1 is-link" data-v-b88148be data-v-b88148be><div class="item" data-v-b88148be><div class="indicator" data-v-b88148be></div><!----><a class="vp-link no-icon link link" href="/notes/database/gprnv62c/" data-v-b88148be data-v-442a52aa><!--[--><p class="text" data-v-b88148be>Redis客户端</p><!--]--><!----></a><!----></div><!----></div><div class="vp-sidebar-item sidebar-item level-1 is-link" data-v-b88148be data-v-b88148be><div class="item" data-v-b88148be><div class="indicator" data-v-b88148be></div><!----><a class="vp-link no-icon link link" href="/notes/database/2uo5tz81/" data-v-b88148be data-v-442a52aa><!--[--><p class="text" data-v-b88148be>Redis数据结构</p><!--]--><!----></a><!----></div><!----></div><div class="vp-sidebar-item sidebar-item level-1 is-link" data-v-b88148be data-v-b88148be><div class="item" data-v-b88148be><div class="indicator" data-v-b88148be></div><!----><a class="vp-link no-icon link link" href="/notes/database/973tb4a7/" data-v-b88148be data-v-442a52aa><!--[--><p class="text" data-v-b88148be>Redis应用场景</p><!--]--><!----></a><!----></div><!----></div><div class="vp-sidebar-item sidebar-item level-1 is-link" data-v-b88148be data-v-b88148be><div class="item" data-v-b88148be><div class="indicator" data-v-b88148be></div><!----><a class="vp-link no-icon link link" href="/notes/database/alsp7lbh/" data-v-b88148be data-v-442a52aa><!--[--><p class="text" data-v-b88148be>Redis补充</p><!--]--><!----></a><!----></div><!----></div><div class="vp-sidebar-item sidebar-item level-1 is-link" data-v-b88148be data-v-b88148be><div class="item" data-v-b88148be><div class="indicator" data-v-b88148be></div><!----><a class="vp-link no-icon link link" href="/notes/database/wd2r9kcw/" data-v-b88148be data-v-442a52aa><!--[--><p class="text" data-v-b88148be>Redis高可用机制</p><!--]--><!----></a><!----></div><!----></div><div class="vp-sidebar-item sidebar-item level-1 is-link" data-v-b88148be data-v-b88148be><div class="item" data-v-b88148be><div class="indicator" data-v-b88148be></div><!----><a class="vp-link no-icon link link" href="/notes/database/3icssroc/" data-v-b88148be data-v-442a52aa><!--[--><p class="text" data-v-b88148be>Redis高级特性</p><!--]--><!----></a><!----></div><!----></div><!--]--></div></section></div><div class="no-transition group" data-v-473fd05b><section class="vp-sidebar-item sidebar-item level-0 collapsible" data-v-473fd05b data-v-b88148be><div class="item" role="button" tabindex="0" data-v-b88148be><div class="indicator" data-v-b88148be></div><!----><h2 class="text" data-v-b88148be>mongodb</h2><div class="caret" role="button" aria-label="toggle section" tabindex="0" data-v-b88148be><span class="vpi-chevron-right caret-icon" data-v-b88148be></span></div></div><div class="items" data-v-b88148be><!--[--><div class="vp-sidebar-item sidebar-item level-1 is-link" data-v-b88148be data-v-b88148be><div class="item" data-v-b88148be><div class="indicator" data-v-b88148be></div><!----><a class="vp-link no-icon link link" href="/notes/database/cphjfra6/" data-v-b88148be data-v-442a52aa><!--[--><p class="text" data-v-b88148be>MongoDB安装</p><!--]--><!----></a><!----></div><!----></div><div class="vp-sidebar-item sidebar-item level-1 is-link" data-v-b88148be data-v-b88148be><div class="item" data-v-b88148be><div class="indicator" data-v-b88148be></div><!----><a class="vp-link no-icon link link" href="/notes/database/qwpubv1e/" data-v-b88148be data-v-442a52aa><!--[--><p class="text" data-v-b88148be>MongoDB基础</p><!--]--><!----></a><!----></div><!----></div><!--]--></div></section></div><div class="no-transition group" data-v-473fd05b><section class="vp-sidebar-item sidebar-item level-0 collapsible" data-v-473fd05b data-v-b88148be><div class="item" role="button" tabindex="0" data-v-b88148be><div class="indicator" data-v-b88148be></div><!----><h2 class="text" data-v-b88148be>demos</h2><div class="caret" role="button" aria-label="toggle section" tabindex="0" data-v-b88148be><span class="vpi-chevron-right caret-icon" data-v-b88148be></span></div></div><div class="items" data-v-b88148be><!--[--><div class="vp-sidebar-item sidebar-item level-1 is-link" data-v-b88148be data-v-b88148be><div class="item" data-v-b88148be><div class="indicator" data-v-b88148be></div><!----><a class="vp-link no-icon link link" href="/notes/database/6r836v2d/" data-v-b88148be data-v-442a52aa><!--[--><p class="text" data-v-b88148be>在线商城系统表设计</p><!--]--><!----></a><!----></div><!----></div><div class="vp-sidebar-item sidebar-item level-1 is-link" data-v-b88148be data-v-b88148be><div class="item" data-v-b88148be><div class="indicator" data-v-b88148be></div><!----><a class="vp-link no-icon link link" href="/notes/database/mco5hsx6/" data-v-b88148be data-v-442a52aa><!--[--><p class="text" data-v-b88148be>权限管理系统设计</p><!--]--><!----></a><!----></div><!----></div><!--]--></div></section></div><!--]--><!--[--><!--]--></nav></aside><!--[--><div id="VPContent" vp-content class="vp-content has-sidebar" data-v-68cd6b44 data-v-eb709286><div class="has-sidebar has-aside vp-doc-container" data-v-fc1170e4><!--[--><!--]--><div class="container" data-v-fc1170e4><div class="aside" vp-outline data-v-fc1170e4><div class="aside-curtain" data-v-fc1170e4></div><div class="aside-container" data-v-fc1170e4><div class="aside-content" data-v-fc1170e4><div class="vp-doc-aside" data-v-fc1170e4 data-v-5976474c><!--[--><!--]--><!--[--><!--]--><nav aria-labelledby="doc-outline-aria-label" class="vp-doc-aside-outline" role="navigation" data-v-5976474c data-v-aa56eba0><div class="content" data-v-aa56eba0><div class="outline-marker" data-v-aa56eba0></div><div id="doc-outline-aria-label" aria-level="2" class="outline-title" role="heading" data-v-aa56eba0><span data-v-aa56eba0>此页内容</span><span class="vpi-print icon" data-v-aa56eba0></span></div><ul class="root" data-v-aa56eba0 data-v-54c74388><!--[--><!--]--></ul></div></nav><!--[--><!--]--><div class="spacer" data-v-5976474c></div><!--[--><!--]--></div></div></div></div><div class="content" data-v-fc1170e4><div class="content-container" data-v-fc1170e4><!--[--><!--]--><main class="main" data-v-fc1170e4><nav class="vp-breadcrumb" data-v-fc1170e4 data-v-f5c5c12d><ol vocab="https://schema.org/" typeof="BreadcrumbList" data-v-f5c5c12d><!--[--><li property="itemListElement" typeof="ListItem" data-v-f5c5c12d><a class="vp-link no-icon link breadcrumb" href="/" property="item" typeof="WebPage" data-v-f5c5c12d data-v-442a52aa><!--[-->首页<!--]--><!----></a><span class="vpi-chevron-right" data-v-f5c5c12d></span><meta property="name" content="首页" data-v-f5c5c12d><meta property="position" content="1" data-v-f5c5c12d></li><li property="itemListElement" typeof="ListItem" data-v-f5c5c12d><span class="vp-link no-icon breadcrumb" href="/" property="item" typeof="WebPage" data-v-f5c5c12d data-v-442a52aa><!--[-->redis<!--]--><!----></span><span class="vpi-chevron-right" data-v-f5c5c12d></span><meta property="name" content="redis" data-v-f5c5c12d><meta property="position" content="2" data-v-f5c5c12d></li><li property="itemListElement" typeof="ListItem" data-v-f5c5c12d><a class="vp-link no-icon link breadcrumb current" href="/notes/database/wd2r9kcw/" property="item" typeof="WebPage" data-v-f5c5c12d data-v-442a52aa><!--[-->Redis高可用机制<!--]--><!----></a><!----><meta property="name" content="Redis高可用机制" data-v-f5c5c12d><meta property="position" content="3" data-v-f5c5c12d></li><!--]--></ol></nav><!--[--><h1 class="vp-doc-title page-title" data-v-8593162d>Redis高可用机制 <!----></h1><div class="vp-doc-meta" data-v-8593162d><p class="reading-time" data-v-8593162d><span class="vpi-books icon" data-v-8593162d></span><span data-v-8593162d>2321字</span><span data-v-8593162d>约8分钟</span></p><!----><p class="create-time" data-v-8593162d><span class="vpi-clock icon" data-v-8593162d></span><span data-v-8593162d>2024-11-24</span></p></div><!--]--><div class="_notes_database_wd2r9kcw_ external-link-icon-enabled vp-doc plume-content" vp-content data-v-fc1170e4><div data-v-fc1170e4><h2 id="数据迁移" tabindex="-1"><a class="header-anchor" href="#数据迁移"><span>数据迁移</span></a></h2><h3 id="move" tabindex="-1"><a class="header-anchor" href="#move"><span><code>move</code></span></a></h3><p><code>move</code>命令适用于在单个Redis实例中，将key从当前数据库移动到另一个数据库。</p><p>示例：</p><div class="language-sh line-numbers-mode" data-ext="sh" data-title="sh"><button class="copy" title="复制代码" data-copied="已复制"></button><pre class="shiki shiki-themes github-light material-theme-darker vp-code"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-light-font-style:inherit;--shiki-dark:#545454;--shiki-dark-font-style:italic;"># 将hello键值对从当前数据库移动到数据库1</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#FFCB6B;">move</span><span style="--shiki-light:#032F62;--shiki-dark:#C3E88D;"> hello</span><span style="--shiki-light:#005CC5;--shiki-dark:#F78C6C;"> 1</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="dump-restore" tabindex="-1"><a class="header-anchor" href="#dump-restore"><span><code>dump</code> + <code>restore</code></span></a></h3><p><code>dump</code>命令将1个key的值序列化为RDB格式的序列，<code>restore</code>命令从RDB序列中恢复key的值。</p><p>组合2个命令可实现在不同Redis实例之间进行数据迁移。</p><p>示例：</p><div class="language-sh line-numbers-mode" data-ext="sh" data-title="sh"><button class="copy" title="复制代码" data-copied="已复制"></button><pre class="shiki shiki-themes github-light material-theme-darker vp-code"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-light-font-style:inherit;--shiki-dark:#545454;--shiki-dark-font-style:italic;"># 在一个Redis中，序列换键hello的值</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#FFCB6B;">dump</span><span style="--shiki-light:#032F62;--shiki-dark:#C3E88D;"> hello</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-light-font-style:inherit;--shiki-dark:#545454;--shiki-dark-font-style:italic;"># 在另一个Redis中，从序列中恢复值。键过期时间为0，表示不设置过期时间</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#FFCB6B;">restore</span><span style="--shiki-light:#032F62;--shiki-dark:#C3E88D;"> hello</span><span style="--shiki-light:#005CC5;--shiki-dark:#F78C6C;"> 0</span><span style="--shiki-light:#032F62;--shiki-dark:#89DDFF;"> &quot;</span><span style="--shiki-light:#032F62;--shiki-dark:#C3E88D;">\x00\x05world\x0b\x00p\x0e\x81\xf7-6\x9bK</span><span style="--shiki-light:#032F62;--shiki-dark:#89DDFF;">&quot;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="migrate" tabindex="-1"><a class="header-anchor" href="#migrate"><span><code>migrate</code></span></a></h3><p><code>migrate</code>命令用于在不同Redis实例之间迁移数据。语法如下：</p><div class="language-sh line-numbers-mode" data-ext="sh" data-title="sh"><button class="copy" title="复制代码" data-copied="已复制"></button><pre class="shiki shiki-themes github-light material-theme-darker vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#FFCB6B;">migrate</span><span style="--shiki-light:#032F62;--shiki-dark:#C3E88D;"> host</span><span style="--shiki-light:#032F62;--shiki-dark:#C3E88D;"> port</span><span style="--shiki-light:#032F62;--shiki-dark:#C3E88D;"> key</span><span style="--shiki-light:#D73A49;--shiki-dark:#89DDFF;">|</span><span style="--shiki-light:#6F42C1;--shiki-dark:#FFCB6B;">&quot;&quot;</span><span style="--shiki-light:#032F62;--shiki-dark:#C3E88D;"> destination-db</span><span style="--shiki-light:#032F62;--shiki-dark:#C3E88D;"> timeout</span><span style="--shiki-light:#24292E;--shiki-dark:#EEFFFF;"> [COPY] </span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">[</span><span style="--shiki-light:#24292E;--shiki-dark:#EEFFFF;">REPLACE</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">]</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;"> [</span><span style="--shiki-light:#24292E;--shiki-dark:#EEFFFF;">AUTH password</span><span style="--shiki-light:#D73A49;--shiki-dark:#89DDFF;">|</span><span style="--shiki-light:#24292E;--shiki-dark:#EEFFFF;">AUTH2 username password</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">]</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;"> [</span><span style="--shiki-light:#24292E;--shiki-dark:#EEFFFF;">KEYS key </span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">[</span><span style="--shiki-light:#24292E;--shiki-dark:#EEFFFF;">key ...</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">]]</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>参数说明：</p><ul><li><code>host</code>：目标Redis实例IP</li><li><code>port</code>：目标Redis实例端口</li><li><code>key|&quot;&quot;</code>：如果迁移1个键，则写键名；否则，写空字符串</li><li><code>destination-db</code>：目标Redis实例数据库</li><li><code>timeout</code>：超时时间，单位毫秒</li><li><code>[COPY]</code>：可选，迁移后不删除源key</li><li><code>[REPLACE]</code>：可选，如果目标Redis实例中存在同名的key，直接替换</li><li><code>[AUTH password|AUTH2 username password]</code>：可选，目标Redis的用户名和密码</li><li><code>[KEYS key [key ...]]</code>：可选，迁移多个键时，指定键列表</li></ul><h2 id="数据持久化机制" tabindex="-1"><a class="header-anchor" href="#数据持久化机制"><span>数据持久化机制</span></a></h2><p>Redis 提供了两种主要的持久化方式，分别是 RDB（Redis DataBase）和 AOF（Append Only File）。这两种方式可以单独或同时使用。</p><h3 id="rdb-保存快照" tabindex="-1"><a class="header-anchor" href="#rdb-保存快照"><span>RDB: 保存快照</span></a></h3><p>RDB（Redis Database），是一种快照持久化方式，将内存中的数据保存到磁盘上的二进制文件中，Redis重启时用RDB文件恢复数据。</p><p>RDB文件保存Redis在某个时间点的数据，其优点是快速、文件紧凑，适合备份大规模数据；缺点是无法做到实时持久化，会丢失最后一次快照之后的所有数据。</p><p><strong>手动触发RDB吃计划</strong></p><p>执行<code>save</code> 或 <code>bgsave</code>命令。</p><p>另外，执行<code>shutdown</code>命令关闭Redis服务器时，也会自动执行<code>bgsave</code>命令</p><p><strong>自动触发RDB持久化</strong></p><div class="language- line-numbers-mode" data-ext="" data-title=""><button class="copy" title="复制代码" data-copied="已复制"></button><pre class="shiki shiki-themes github-light material-theme-darker vp-code"><code><span class="line"><span>dir ./</span></span>
<span class="line"><span>dbfilename dump.rdb</span></span>
<span class="line"><span></span></span>
<span class="line"><span># save &lt;seconds&gt; &lt;changes&gt; [&lt;seconds&gt; &lt;changes&gt; ...]</span></span>
<span class="line"><span>save 3600 1 300 100 60 10000</span></span>
<span class="line"><span></span></span>
<span class="line"><span># 禁用RDB自动持久化</span></span>
<span class="line"><span># save &quot;&quot;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="aof-只追加文件" tabindex="-1"><a class="header-anchor" href="#aof-只追加文件"><span>AOF: 只追加文件</span></a></h3><p>AOF（Append Only File），是一种日志持久化方式，将每一个写命令追加到日志文件末尾，记录数据库的变更记录，Redis重启时重写执行AOF日志文件中的命令来恢复数据。</p><p>开启AOF后，Redis重启时，优先加载AOF持久化文件。</p><p>AOF持久化方式的优点是数据完整性高、适合增量更新；缺点是AOF文件较大、且恢复数据较慢。</p><p><strong>配置项</strong></p><div class="language- line-numbers-mode" data-ext="" data-title=""><button class="copy" title="复制代码" data-copied="已复制"></button><pre class="shiki shiki-themes github-light material-theme-darker vp-code"><code><span class="line"><span># 开启AOF</span></span>
<span class="line"><span>appendonly yes</span></span>
<span class="line"><span></span></span>
<span class="line"><span>appendfilename &quot;appendonly.aof&quot;</span></span>
<span class="line"><span>appenddirname &quot;appendonlydir&quot;</span></span>
<span class="line"><span></span></span>
<span class="line"><span># 写入磁盘的策略</span></span>
<span class="line"><span># appendfsync always</span></span>
<span class="line"><span>appendfsync everysec</span></span>
<span class="line"><span># appendfsync no</span></span>
<span class="line"><span></span></span>
<span class="line"><span># 自动触发AOF重写: aof文件至少为64mb，且达到上次重写时aof文件大小的100%</span></span>
<span class="line"><span>auto-aof-rewrite-percentage 100</span></span>
<span class="line"><span>auto-aof-rewrite-min-size 64mb</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>通过AOF重写，可以减小AOF文件的大小，通过以下2个配置项自动触发AOF重写：</p><ul><li><code>auto-aof-rewrite-percentage</code>：AOF文件达到上次重写后文件大小的百分比</li><li><code>auto-aof-rewrite-min-siz</code>：AOF文件至少多大时，才触发重写。默认64mb</li></ul><p>另外，可以通过命令<code>bgrewriteaof</code>，手动触发AOF重写。</p><h2 id="主从复制机制" tabindex="-1"><a class="header-anchor" href="#主从复制机制"><span>主从复制机制</span></a></h2><blockquote><p>参考：https://redis.io/docs/management/replication/</p></blockquote><p>Redis复制（Replication）是指将master服务器的数据同步到slave服务器的架构。主从复制步骤如下：</p><ol><li>从节点连接到主节点，主节点发送全量数据给从节点</li><li>从节点监听来自主节点的写操作，主节点将写操作发送给从节点，从节点执行同样的写操作，从而实现数据的增量更新</li><li>从节点重新上线后，会重新向主节点请求全量数据</li></ol><p>Redis主从复制的优点包括：</p><ul><li>提高了系统的可用性和容错性</li><li>支持读写分离；</li></ul><p>Redis主从复制的缺点包括：</p><ul><li>主从复制是异步执行，存在延迟问题</li><li>存在主服务器的单点故障问题</li></ul><p>使用命令：<code>info replication</code> 查看主从服务信息。</p><h3 id="主从复制的拓扑结构" tabindex="-1"><a class="header-anchor" href="#主从复制的拓扑结构"><span>主从复制的拓扑结构</span></a></h3><h4 id="一主一从" tabindex="-1"><a class="header-anchor" href="#一主一从"><span>一主一从</span></a></h4><p>1个master实例、1个slave实例。当主节点故障时，可以将从节点升级为主节点。</p><p><img src="data:image/png;base64,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" alt=""></p><h4 id="一主多从" tabindex="-1"><a class="header-anchor" href="#一主多从"><span>一主多从</span></a></h4><p>1个master实例、多个slave实例。主节点负责写、从节点负责读，可实现读写分离。</p><p><img src="/assets/20240317183823-C9IEUiHx.png" alt=""></p><h4 id="树状" tabindex="-1"><a class="header-anchor" href="#树状"><span>树状</span></a></h4><p>slave实例也可以同时充当master实例的角色。从节点既可以复制主节点的数据，也可作为主节点，向下层从节点复制数据，降低主节点的写操作压力。</p><p><img src="/assets/20240317183824-BGINZ2wV.png" alt=""></p><h3 id="快速开始" tabindex="-1"><a class="header-anchor" href="#快速开始"><span>快速开始</span></a></h3><h4 id="环境准备" tabindex="-1"><a class="header-anchor" href="#环境准备"><span>环境准备</span></a></h4><p>&quot;一主多从&quot;拓扑结构为例：采用1台master服务器+2台slave服务的架构，用docker创建Redis容器。</p><p><strong>创建3个Redis容器</strong></p><p>拉取镜像：<code>docker pull redis:7</code></p><p>master实例</p><div class="language-sh line-numbers-mode" data-ext="sh" data-title="sh"><button class="copy" title="复制代码" data-copied="已复制"></button><pre class="shiki shiki-themes github-light material-theme-darker vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#FFCB6B;">mkdir</span><span style="--shiki-light:#005CC5;--shiki-dark:#C3E88D;"> -p</span><span style="--shiki-light:#032F62;--shiki-dark:#C3E88D;"> /docker/redis7/conf/</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#FFCB6B;">touch</span><span style="--shiki-light:#032F62;--shiki-dark:#C3E88D;"> /docker/redis7/conf/redis.conf</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#FFCB6B;">docker</span><span style="--shiki-light:#032F62;--shiki-dark:#C3E88D;"> create</span><span style="--shiki-light:#005CC5;--shiki-dark:#C3E88D;"> --name</span><span style="--shiki-light:#032F62;--shiki-dark:#C3E88D;"> redis7</span><span style="--shiki-light:#005CC5;--shiki-dark:#C3E88D;"> -p</span><span style="--shiki-light:#032F62;--shiki-dark:#C3E88D;"> 6379:6379</span><span style="--shiki-light:#005CC5;--shiki-dark:#C3E88D;"> -v</span><span style="--shiki-light:#032F62;--shiki-dark:#C3E88D;"> /docker/redis7/conf:/etc/redis</span><span style="--shiki-light:#005CC5;--shiki-dark:#C3E88D;"> -v</span><span style="--shiki-light:#032F62;--shiki-dark:#C3E88D;"> /docker/redis7/data:/data</span><span style="--shiki-light:#032F62;--shiki-dark:#C3E88D;"> redis:7</span><span style="--shiki-light:#032F62;--shiki-dark:#C3E88D;"> redis-server</span><span style="--shiki-light:#032F62;--shiki-dark:#C3E88D;"> /etc/redis/redis.conf</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>slave实例a</p><div class="language-sh line-numbers-mode" data-ext="sh" data-title="sh"><button class="copy" title="复制代码" data-copied="已复制"></button><pre class="shiki shiki-themes github-light material-theme-darker vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#FFCB6B;">mkdir</span><span style="--shiki-light:#005CC5;--shiki-dark:#C3E88D;"> -p</span><span style="--shiki-light:#032F62;--shiki-dark:#C3E88D;"> /docker/redis7a/conf/</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#FFCB6B;">touch</span><span style="--shiki-light:#032F62;--shiki-dark:#C3E88D;"> /docker/redis7a/conf/redis.conf</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#FFCB6B;">docker</span><span style="--shiki-light:#032F62;--shiki-dark:#C3E88D;"> create</span><span style="--shiki-light:#005CC5;--shiki-dark:#C3E88D;"> --name</span><span style="--shiki-light:#032F62;--shiki-dark:#C3E88D;"> redis7a</span><span style="--shiki-light:#005CC5;--shiki-dark:#C3E88D;"> -p</span><span style="--shiki-light:#032F62;--shiki-dark:#C3E88D;"> 6377:6379</span><span style="--shiki-light:#005CC5;--shiki-dark:#C3E88D;"> -v</span><span style="--shiki-light:#032F62;--shiki-dark:#C3E88D;"> /docker/redis7a/conf:/etc/redis</span><span style="--shiki-light:#005CC5;--shiki-dark:#C3E88D;"> -v</span><span style="--shiki-light:#032F62;--shiki-dark:#C3E88D;"> /docker/redis7a/data:/data</span><span style="--shiki-light:#032F62;--shiki-dark:#C3E88D;"> redis:7</span><span style="--shiki-light:#032F62;--shiki-dark:#C3E88D;"> redis-server</span><span style="--shiki-light:#032F62;--shiki-dark:#C3E88D;"> /etc/redis/redis.conf</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>slave实例b</p><div class="language-sh line-numbers-mode" data-ext="sh" data-title="sh"><button class="copy" title="复制代码" data-copied="已复制"></button><pre class="shiki shiki-themes github-light material-theme-darker vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#FFCB6B;">mkdir</span><span style="--shiki-light:#005CC5;--shiki-dark:#C3E88D;"> -p</span><span style="--shiki-light:#032F62;--shiki-dark:#C3E88D;"> /docker/redis7b/conf/</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#FFCB6B;">touch</span><span style="--shiki-light:#032F62;--shiki-dark:#C3E88D;"> /docker/redis7b/conf/redis.conf</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#FFCB6B;">docker</span><span style="--shiki-light:#032F62;--shiki-dark:#C3E88D;"> create</span><span style="--shiki-light:#005CC5;--shiki-dark:#C3E88D;"> --name</span><span style="--shiki-light:#032F62;--shiki-dark:#C3E88D;"> redis7b</span><span style="--shiki-light:#005CC5;--shiki-dark:#C3E88D;"> -p</span><span style="--shiki-light:#032F62;--shiki-dark:#C3E88D;"> 6378:6379</span><span style="--shiki-light:#005CC5;--shiki-dark:#C3E88D;"> -v</span><span style="--shiki-light:#032F62;--shiki-dark:#C3E88D;"> /docker/redis7b/conf:/etc/redis</span><span style="--shiki-light:#005CC5;--shiki-dark:#C3E88D;"> -v</span><span style="--shiki-light:#032F62;--shiki-dark:#C3E88D;"> /docker/redis7b/data:/data</span><span style="--shiki-light:#032F62;--shiki-dark:#C3E88D;"> redis:7</span><span style="--shiki-light:#032F62;--shiki-dark:#C3E88D;"> redis-server</span><span style="--shiki-light:#032F62;--shiki-dark:#C3E88D;"> /etc/redis/redis.conf</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>每个Redis实例的基础配置文件如下：</p><div class="language- line-numbers-mode" data-ext="" data-title=""><button class="copy" title="复制代码" data-copied="已复制"></button><pre class="shiki shiki-themes github-light material-theme-darker vp-code"><code><span class="line"><span># redis.conf</span></span>
<span class="line"><span></span></span>
<span class="line"><span># bind 127.0.0.1 -::1</span></span>
<span class="line"><span>port 6379</span></span>
<span class="line"><span># 开启保护模式</span></span>
<span class="line"><span>protected-mode yes</span></span>
<span class="line"><span># 密码</span></span>
<span class="line"><span>requirepass foobared</span></span>
<span class="line"><span></span></span>
<span class="line"><span># RDB持久化配置</span></span>
<span class="line"><span># save 3600 1 300 100 60 10000</span></span>
<span class="line"><span>dbfilename dump.rdb</span></span>
<span class="line"><span># dir ./</span></span>
<span class="line"><span>dir /data</span></span>
<span class="line"><span></span></span>
<span class="line"><span># AOF持久化配置</span></span>
<span class="line"><span>appendonly no</span></span>
<span class="line"><span>appendfilename &quot;appendonly.aof&quot;</span></span>
<span class="line"><span># appendfsync always</span></span>
<span class="line"><span>appendfsync everysec</span></span>
<span class="line"><span># appendfsync no</span></span>
<span class="line"><span></span></span>
<span class="line"><span>auto-aof-rewrite-percentage 100</span></span>
<span class="line"><span>auto-aof-rewrite-min-size 64mb</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="配置slave实例" tabindex="-1"><a class="header-anchor" href="#配置slave实例"><span>配置slave实例</span></a></h4><p>在2台slave实例的配置文件中，配置master实例的IP、端口、认证信息。</p><div class="language- line-numbers-mode" data-ext="" data-title=""><button class="copy" title="复制代码" data-copied="已复制"></button><pre class="shiki shiki-themes github-light material-theme-darker vp-code"><code><span class="line"><span># replicaof &lt;masterip&gt; &lt;masterport&gt;</span></span>
<span class="line"><span>replicaof 172.17.0.2 6379</span></span>
<span class="line"><span></span></span>
<span class="line"><span># masterauth &lt;master-password&gt;</span></span>
<span class="line"><span>masterauth foobared</span></span>
<span class="line"><span></span></span>
<span class="line"><span># masteruser &lt;username&gt;</span></span>
<span class="line"><span></span></span>
<span class="line"><span># 从节点只读</span></span>
<span class="line"><span>replica-read-only yes</span></span>
<span class="line"><span></span></span>
<span class="line"><span># 是否禁用主节点无延迟发送TCP数据包</span></span>
<span class="line"><span>repl-disable-tcp-nodelay no</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="启动redis实例" tabindex="-1"><a class="header-anchor" href="#启动redis实例"><span>启动Redis实例</span></a></h4><p>1.启动master实例</p><p><code>docker start redis7</code></p><p>2.启动2台slave实例</p><p><code>docker start redis7a redis7b</code></p><p>此时，查看master实例的日志，可以看到，2台slave实例成功连接到了master实例</p><p><code>docker logs redis7</code></p><p><img src="/assets/20240317162137-BB7Vo6J9.png" alt=""></p><h4 id="验证" tabindex="-1"><a class="header-anchor" href="#验证"><span>验证</span></a></h4><p>在master实例中，设置键值对&quot;hello=world&quot;</p><p><img src="/assets/20240317162706-EojATd2g.png" alt=""></p><p>在2台slave实例中，查看键&quot;hello&quot;的值，成功获取到&quot;world&quot;</p><p><img src="/assets/20240317162812-But54YTT.png" alt=""></p><h3 id="使用命令指定主从关系" tabindex="-1"><a class="header-anchor" href="#使用命令指定主从关系"><span>使用命令指定主从关系</span></a></h3><p>使用<code>slaveof</code>命令，语法如下：</p><p><code>SLAVEOF &lt;host port | NO ONE&gt;</code></p><p>可以临时指定当前Redis实例作为slave</p><p><code>slaveof 172.17.0.2 6379</code></p><p>或者，取消主从关系（成为master）</p><p><code>slaveof no one</code></p><h2 id="哨兵模式" tabindex="-1"><a class="header-anchor" href="#哨兵模式"><span>哨兵模式</span></a></h2><blockquote><p>参考：https://redis.io/docs/management/sentinel/</p></blockquote><p>Redis哨兵（Redis Sentinel）可以监控主从架构中的Redis数据节点实例，当master实例故障时，自动选举1个slave实例，将其升级为新的master实例，实现自动故障发现与转移，确保系统的高可用与容错性。</p><p>Redis本身可以使用sentinel模式运行，支持以下2种启动方式：</p><ul><li><code>redis-sentinel /path/to/sentinel.conf</code></li><li><code>redis-server /path/to/sentinel.conf --sentinel</code></li></ul><p>Redis哨兵数量为奇数，且推荐哨兵数量不少于3个。</p><p>典型的&quot;哨兵+主从复制&quot;拓扑图如下：</p><p><img src="/assets/20240317183825-C01_7X2h.png" alt=""></p><h3 id="快速开始-1" tabindex="-1"><a class="header-anchor" href="#快速开始-1"><span>快速开始</span></a></h3><h4 id="环境准备-1" tabindex="-1"><a class="header-anchor" href="#环境准备-1"><span>环境准备</span></a></h4><p>使用3个Sentinel节点 + 1个master数据节点 + 2个slave数据节点的架构。</p><p>其中，数据节点使用主从复制时创建的docker容器。</p><p><strong>创建3个docker容器作为Redis哨兵</strong></p><blockquote><p>哨兵节点端口为26379</p></blockquote><p>哨兵实例x</p><div class="language- line-numbers-mode" data-ext="" data-title=""><button class="copy" title="复制代码" data-copied="已复制"></button><pre class="shiki shiki-themes github-light material-theme-darker vp-code"><code><span class="line"><span>mkdir -p /docker/redis7-sentinel-a/conf/</span></span>
<span class="line"><span>touch /docker/redis7-sentinel-a/conf/sentinel.conf</span></span>
<span class="line"><span></span></span>
<span class="line"><span>docker create --name redis7-sentinel-a -p 26370:26379 -v /docker/redis7-sentinel-a/conf:/etc/redis -v /docker/redis7-sentinel-a/data:/data redis:7 redis-sentinel /etc/redis/sentinel.conf</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>哨兵实例y</p><div class="language- line-numbers-mode" data-ext="" data-title=""><button class="copy" title="复制代码" data-copied="已复制"></button><pre class="shiki shiki-themes github-light material-theme-darker vp-code"><code><span class="line"><span>mkdir -p /docker/redis7-sentinel-b/conf/</span></span>
<span class="line"><span>touch /docker/redis7-sentinel-b/conf/sentinel.conf</span></span>
<span class="line"><span></span></span>
<span class="line"><span>docker create --name redis7-sentinel-b -p 26371:26379 -v /docker/redis7-sentinel-b/conf:/etc/redis -v /docker/redis7-sentinel-b/data:/data redis:7 redis-sentinel /etc/redis/sentinel.conf</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>哨兵实例z</p><div class="language- line-numbers-mode" data-ext="" data-title=""><button class="copy" title="复制代码" data-copied="已复制"></button><pre class="shiki shiki-themes github-light material-theme-darker vp-code"><code><span class="line"><span>mkdir -p /docker/redis7-sentinel-c/conf/</span></span>
<span class="line"><span>touch /docker/redis7-sentinel-c/conf/sentinel.conf</span></span>
<span class="line"><span></span></span>
<span class="line"><span>docker create --name redis7-sentinel-c -p 26372:26379 -v /docker/redis7-sentinel-c/conf:/etc/redis -v /docker/redis7-sentinel-c/data:/data redis:7 redis-sentinel /etc/redis/sentinel.conf</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="配置哨兵实例" tabindex="-1"><a class="header-anchor" href="#配置哨兵实例"><span>配置哨兵实例</span></a></h4><p>在每一个哨兵节点的<em>sentinel.conf</em>配置文件中，配置哨兵监听的主节点IP、端口、<strong>判定主节点故障所需要的票数</strong>，以及主节点的认证信息等。</p><p>如果哨兵要同时监控多个主节点，只需要添加主节点名称不同的配置即可。</p><div class="language- line-numbers-mode" data-ext="" data-title=""><button class="copy" title="复制代码" data-copied="已复制"></button><pre class="shiki shiki-themes github-light material-theme-darker vp-code"><code><span class="line"><span># bind 127.0.0.1</span></span>
<span class="line"><span>port 26379</span></span>
<span class="line"><span></span></span>
<span class="line"><span>protected-mode no</span></span>
<span class="line"><span></span></span>
<span class="line"><span># 配置master实例</span></span>
<span class="line"><span>sentinel monitor mymaster 172.17.0.2 6379 2</span></span>
<span class="line"><span># sentinel auth-user &lt;master-name&gt; &lt;username&gt;</span></span>
<span class="line"><span>sentinel auth-pass mymaster foobared</span></span>
<span class="line"><span></span></span>
<span class="line"><span># 判定节点下线的超时时间，默认30s</span></span>
<span class="line"><span>sentinel down-after-milliseconds mymaster 30000</span></span>
<span class="line"><span># 当选出新的主节点后，允许同时向主节点发起复制操作的从节点数量</span></span>
<span class="line"><span>sentinel parallel-syncs mymaster 1</span></span>
<span class="line"><span>sentinel failover-timeout mymaster 180000</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="启动哨兵实例" tabindex="-1"><a class="header-anchor" href="#启动哨兵实例"><span>启动哨兵实例</span></a></h4><p>先启动Redis主从节点</p><p><code>docker start redis7a redis7b redis7c</code></p><p>再启动哨兵节点</p><p><code>docker start redis7-sentinel-a redis7-sentinel-b redis7-sentinel-c</code></p><h4 id="验证-1" tabindex="-1"><a class="header-anchor" href="#验证-1"><span>验证</span></a></h4><p>进入任意一个哨兵节点容器</p><p><code>docker exec -it redis7-sentinel-a redis-cli -p 26379</code></p><p>运行 <code>info sentinel</code>命令，查看哨兵信息</p><p>关闭主节点</p><p><code>docker stop redis7</code></p><p>查看主从节点信息</p><p><code>info replication</code></p><h2 id="集群" tabindex="-1"><a class="header-anchor" href="#集群"><span>集群</span></a></h2><h3 id="搭建集群" tabindex="-1"><a class="header-anchor" href="#搭建集群"><span>搭建集群</span></a></h3><h4 id="_1-准备节点" tabindex="-1"><a class="header-anchor" href="#_1-准备节点"><span>1.准备节点</span></a></h4><h4 id="_2-节点握手" tabindex="-1"><a class="header-anchor" href="#_2-节点握手"><span>2.节点握手</span></a></h4><p><code>cluster meet ip port</code></p><h4 id="_3-给每个主节点分配槽" tabindex="-1"><a class="header-anchor" href="#_3-给每个主节点分配槽"><span>3.给每个主节点分配槽</span></a></h4><p>将16384（0-16383）个槽分配给集群中的主节点。</p><p><code>cluster addslots 0-5000</code></p><h4 id="_4-为每个从节点设置要复制的主节点" tabindex="-1"><a class="header-anchor" href="#_4-为每个从节点设置要复制的主节点"><span>4.为每个从节点设置要复制的主节点</span></a></h4><p><code>cluster replicate node-id</code></p></div><!----><!----></div></main><footer class="vp-doc-footer" data-v-fc1170e4 data-v-f7268517><!--[--><!--]--><!----><div class="contributors" aria-label="Contributors" data-v-f7268517><span class="contributors-label" data-v-f7268517>贡献者: </span><span class="contributors-info" data-v-f7268517><!--[--><!--[--><span class="contributor" data-v-f7268517>ianping</span><!----><!--]--><!--]--></span></div><nav class="prev-next" data-v-f7268517><div class="pager" data-v-f7268517><a class="vp-link no-icon link pager-link prev" href="/notes/database/alsp7lbh/" data-v-f7268517 data-v-442a52aa><!--[--><span class="desc" data-v-f7268517>上一页</span><span class="title" data-v-f7268517>Redis补充</span><!--]--><!----></a></div><div class="pager" data-v-f7268517><a class="vp-link no-icon link pager-link next" href="/notes/database/3icssroc/" data-v-f7268517 data-v-442a52aa><!--[--><span class="desc" data-v-f7268517>下一页</span><span class="title" data-v-f7268517>Redis高级特性</span><!--]--><!----></a></div></nav></footer><!----><!--[--><!--]--></div></div></div><!--[--><!--]--></div></div><!--]--><button style="display:none;" type="button" class="vp-back-to-top" aria-label="back to top" data-v-68cd6b44 data-v-c122fdb6><span class="percent" data-allow-mismatch data-v-c122fdb6>0%</span><span class="show icon vpi-back-to-top" data-v-c122fdb6></span><svg aria-hidden="true" data-v-c122fdb6><circle cx="50%" cy="50%" data-allow-mismatch style="stroke-dasharray:calc(0% - 12.566370614359172px) calc(314.1592653589793% - 12.566370614359172px);" data-v-c122fdb6></circle></svg></button><!--[--><!--]--><!--]--></div><!----><!--]--><!--[--><!--]--><!--]--></div><script type="module" src="/assets/app-dwrF6lVS.js" defer></script></body></html>